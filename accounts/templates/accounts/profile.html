{% extends 'library/base.html' %}
{% load static %}

{% block title %}Home{% endblock %}

{% block content %}
<style type="text/css">
  h5 {
    letter-spacing: 3px;
}

</style>

<!-- Intro Section -->

<div class="container">
  <div class="row justify-content-center">

    <!--WORK HERE-->
    <div class="col-md-10">
        <div class="container mt-5">
            <h4 class="text-center">Welcome {{ user.username }}, to the best learning experience you've ever had!</h4>
            <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
              <header class="section__play-btn mdl-cell mdl-cell--3-col-desktop mdl-cell--2-col-tablet mdl-cell--4-col-phone mdl-color-text--white" style="background-image: url({% static 'account/images/damzupgraded.png' %});">
              </header>
              <div class="mdl-card mdl-cell mdl-cell--9-col-desktop mdl-cell--6-col-tablet mdl-cell--4-col-phone">
                <div class="mdl-card__title">
                  <h4>Damzinium has upgraded!!!</h4>
                </div>
                <div class="mdl-card__supporting-text">
                        Bigger. Better. A learning experience you'll never forget.
                </div>
                <div class="mdl-card__actions mdl-card--border">
                  <a href="{% url 'library:about' %}" class="mdl-button">What's new?</a>
                </div>
              </div>
            </section>


          <!--Department-->
          <div class="white mdl-shadow--2dp container"><h4 class="mb-4 damzi-dark-green-text">Select a UGRC to study</h4></div>

              <!-- UGRC PILLS -->
        <!--FOR NOW THERE SHOULD BE ONLY ONE PILL. A LOOP CAN BE USED TO GENERATE THE SECOND PILL LATER. it would have to be a nested loop though, else the "active" will appear more than once-->
<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" id="pills-L100-tab" data-toggle="pill" href="#pills-L100" role="tab" aria-controls="pills-L100" aria-selected="true">MY COURSES</a>
  </li>
</ul>
<div class="tab-content pt-2 pl-1" id="pills-tabContent">
  <!-- level 100 tab -->
  <div class="tab-pane fade show active" id="pills-L100" role="tabpanel" aria-labelledby="pills-L100-tab">
    <!-- Swiper -->
                  <div class="swiper-container">
                    <div class="swiper-wrapper">
                  <!--UGRC-->
                  {% for course in selected_courses %}
                      <div class="swiper-slide">
                        <div class="mdl-card mdl-shadow--4dp" id="course-{{ course.id }}">
                          <div class="mdl-card__media"><img src="{% static 'account/images/placeholder.jpg' %}" width="100%"
                            alt="">
                          </div>
                          <div class="mdl-card__title">
                            {{ course.code }}
                          </div>
                          <div class="mdl-card__supporting-text">
                            {{ course.name }}
                          </div>
                          <div class="mdl-card__actions mdl-card--border">
                            <a href="{% url 'library:detail' course.id %}" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                              Study
                            </a>
                          </div>
                          <a href="#" class="btn-floating btn-sm remove-course-selection-btn" style="position: absolute; top: 0; right: 0;" id="{{ course.id }}"><i class="fa fa-minus"></i></a>
                        </div>
                      </div>
                      {% endfor %}

                    </div><!--UGRC-->
                  <!-- Add Arrows -->
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
                  </div><!--/Department-->
  </div>

</div><!-- /.UGRC PILLS -->

              </div>
          </div>
          <!-- /WORK HERE -->

      </div>
  </div>

<script>
  $('.remove-course-selection-btn').click(
    function (e) {
      e.preventDefault();
      const csrf = $('{% csrf_token %}');
      $.post("{% url 'library:remove_course_selection' %}", {
        course_id: this.id,
        csrfmiddlewaretoken: csrf.val(),
      }, function (data) {
        const courseCard = $('#course-' + data.course_id)
        courseCard.fadeOut("slow", function () {
          courseCard.remove();
        });
        getAndRenderMessages();
      });
    }
  );

</script>

{% endblock %}
