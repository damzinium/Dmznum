{% extends 'accounts/base.html' %}
{% load static %}

{% block title %}Login{% endblock %}
{% block content %}
    <div id="login_form" class="my-4">
      <div class="" id="form">
        <form action="" method="post">
          {% csrf_token %}
          <!-- Material form login -->
          <div class="card">

            <h5 class="card-header stylish-color white-text text-center py-4">
              <strong>Sign in</strong>
            </h5>

            <!--Card content-->
            <div class="card-body px-lg-5 pt-0">
                {% for field in form %}
                <div class="my-3 md-form" style="min-width:100%">
                  {{ field }}
                </div>
                {% endfor %}

                <div class="d-flex justify-content-around">
                  <div>
                    <!-- Remember me -->
                    <div class="form-check">
                      <input type="checkbox" class="form-check-input" id="materialLoginFormRemember">
                      <label class="form-check-label" for="materialLoginFormRemember">Remember me</label>
                    </div>
                  </div>
                  <div>
                    <!-- Forgot password -->
                    <a href="{% url 'accounts:password_reset' %}">Forgot password?</a>
                  </div>
                </div>

                <!-- Sign in button -->
                <button class="btn btn-outline-elegant btn-rounded my-4 waves-effect z-depth-0" type="submit">Sign in</button>

                <!-- Register -->
                <p>Not a member?
                  <a href="{% url 'accounts:register' %}">Register</a>
                </p>

              

            </div>

          </div>
          <!-- Material form login -->
        </form>
      </div>
    </div>
    
    <script>
      // event handler for disabling login btn when some fields are empty
      function loginBtnStateHandler() {
        const usernameOrEmailField = document.querySelector('#id_username_or_email');
        const passwordField = document.querySelector('#id_password');
        let loginBtn = document.querySelector('#login-btn');
        if(usernameOrEmailField.value != '' && passwordField.value != '') {
          loginBtn.removeAttribute('disabled');
        }
        else {
          loginBtn.setAttribute('disabled', 'disabled');
        }
      }

    </script>
{% endblock %}
